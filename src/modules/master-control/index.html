<!doctype html>
<!--
Dock-It.live Master Control Panel
Universal scorekeeping shell for all game modules
-->

<html>
<head>
	<meta charset="UTF-8">
	<!-- CRITICAL: Theme stylesheets MUST stay in this exact order -->
	<!-- Relative paths work in both Vite dev server and OBS file:// protocol -->
	<link rel="stylesheet" href="../../common/css/control_panel/yami.css" />
	<link rel="stylesheet" href="../../common/css/control_panel/dark.css" />
	<link rel="stylesheet" href="../../common/css/control_panel/acri.css" />
	<link rel="stylesheet" href="../../common/css/control_panel/grey.css" />
	<link rel="stylesheet" href="../../common/css/control_panel/light.css" />
	<link rel="stylesheet" href="../../common/css/control_panel/rachni.css" />
	<link rel="stylesheet" href="../../common/css/control_panel/base.css" />
	<link rel="stylesheet" href="../../common/css/control_panel/layout.css" />
	<link rel="stylesheet" href="../../common/css/control_panel/components.css" />
	<link rel="stylesheet" href="../../common/css/control_panel/required.css" />

	<script>
	var versionNum = "4.0.0"; // Master Shell version
	</script>

	<style>
		/* Player Name Autocomplete Dropdown Styles */
		.quick-search-results {
			position: absolute;
			top: 100%;
			left: 0;
			right: 0;
			background: var(--bg-primary);
			border: 1px solid var(--border-color);
			border-radius: 4px;
			box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
			max-height: 300px;
			overflow-y: auto;
			z-index: 1000;
			margin-top: 4px;
		}

		.quick-search-result-item {
			padding: 10px 12px;
			cursor: pointer;
			border-bottom: 1px solid var(--border-color);
			transition: background 0.15s;
		}

		.quick-search-result-item:last-child {
			border-bottom: none;
		}

		.quick-search-result-item:hover,
		.quick-search-result-item.selected {
			background: var(--btn-hover-bg);
		}

		.quick-search-result-item.selected {
			border-left: 3px solid var(--accent-color);
		}

		.quick-search-result-name {
			font-weight: 600;
			font-size: 0.95em;
			color: var(--text-primary);
		}

		.quick-search-result-details {
			font-size: 0.8em;
			color: var(--text-muted);
			margin-top: 2px;
		}

		.quick-search-no-results {
			padding: 20px;
			text-align: center;
			color: var(--text-muted);
			font-size: 0.9em;
		}

		.player-name-wrapper {
			position: relative;
			flex: 1;
		}
	</style>

	<meta name="viewport" content="width=device-width,initial-scale=1,user-scalable=no">
	<title>Dock-It.live Master Control</title>
</head>
<body>

	<!-- Fixed Header -->
	<header class="panel-header">
		<span class="version-text">Dock-It.live Master Control v<span id="verNum"></span></span>
		<span id="updateStatus"></span>
	</header>

	<div id="mainDiv">

		<!-- =================================================================== -->
		<!-- SECTION: Global Match Information -->
		<!-- =================================================================== -->
		<section class="section-card" id="globalMatchInfo">
			<div class="section-card__title">
				<span class="section-title-text">Match Information</span>
				<button class="settings-btn hover" id="openSettingsBtn">Settings</button>
			</div>

			<div class="input-row">
				<label>Info Tab 1:</label>
				<input type="text" id="matchInfoTab1" class="input-field" placeholder="Race to 7 | Best of 3">
			</div>

			<div class="input-row">
				<label>Info Tab 2:</label>
				<input type="text" id="matchInfoTab2" class="input-field" placeholder="Fargo 500 | $50 Action">
			</div>
		</section>

		<!-- =================================================================== -->
		<!-- SECTION: Player Grid (Names, Photos, Scores) -->
		<!-- =================================================================== -->
		<section class="section-card" id="playerGrid">
			<div class="section-card__title">
				<span class="section-title-text">Players</span>
				<button class="settings-btn hover" id="openPlayerManagerBtn">Player Manager</button>
			</div>

			<!-- Player 1 -->
			<div class="input-row">
				<label>Player 1:</label>
				<span class="hover photoUploadBtn" id="p1PhotoBtn">
					<input type="file" id="FileUploadP1Photo" accept="image/png, image/jpeg, image/svg+xml, image/bmp" />
					<div style="position:relative; display:inline-block;">
						<img id="p1PhotoDisplay" src="/common/images/placeholder.png" style="height:30px; max-width:70px; border-radius:50%; display:none;">
						<span id="p1PhotoDelete" class="photo-delete-btn" style="display:none;">&times;</span>
					</div>
					<span id="p1PhotoText">Photo</span>
				</span>
				<div class="player-name-wrapper">
					<input type="text" id="p1Name" class="input-field" placeholder="Player 1 (type to search)" autocomplete="off">
					<div id="p1NameResults" class="quick-search-results" style="display: none;"></div>
				</div>
			</div>

			<!-- Player 1 Score + Ranking -->
			<div class="input-row">
				<label>P1 Score:</label>
				<button class="btn hover" id="sendP1ScoreSub">-</button>
				<span id="p1ScoreDisplay" class="score-display">0</span>
				<button class="btn hover greenBtn" id="sendP1Score">+</button>
				<input type="text" id="p1Ranking" class="input-field" placeholder="Fargo, ELO, etc." style="width: 95px; margin-left: 8px;">
				<span id="p1RatingSource" class="rating-source-badge" title="Rating source" style="display: none; margin-left: 4px; font-size: 10px; padding: 2px 4px; border-radius: 3px; background: #3b82f6; color: white;">M</span>
			</div>

			<hr style="border: 1px solid var(--border-color); margin: 10px 0;">

			<!-- Player 2 -->
			<div class="input-row">
				<label>Player 2:</label>
				<span class="hover photoUploadBtn" id="p2PhotoBtn">
					<input type="file" id="FileUploadP2Photo" accept="image/png, image/jpeg, image/svg+xml, image/bmp" />
					<div style="position:relative; display:inline-block;">
						<img id="p2PhotoDisplay" src="/common/images/placeholder.png" style="height:30px; max-width:70px; border-radius:50%; display:none;">
						<span id="p2PhotoDelete" class="photo-delete-btn" style="display:none;">&times;</span>
					</div>
					<span id="p2PhotoText">Photo</span>
				</span>
				<div class="player-name-wrapper">
					<input type="text" id="p2Name" class="input-field" placeholder="Player 2 (type to search)" autocomplete="off">
					<div id="p2NameResults" class="quick-search-results" style="display: none;"></div>
				</div>
			</div>

			<!-- Player 2 Score + Ranking -->
			<div class="input-row">
				<label>P2 Score:</label>
				<button class="btn hover" id="sendP2ScoreSub">-</button>
				<span id="p2ScoreDisplay" class="score-display">0</span>
				<button class="btn hover greenBtn" id="sendP2Score">+</button>
				<input type="text" id="p2Ranking" class="input-field" placeholder="Fargo, ELO, etc." style="width: 95px; margin-left: 8px;">
				<span id="p2RatingSource" class="rating-source-badge" title="Rating source" style="display: none; margin-left: 4px; font-size: 10px; padding: 2px 4px; border-radius: 3px; background: #3b82f6; color: white;">M</span>
			</div>

			<hr style="border: 1px solid var(--border-color); margin: 10px 0;">

			<!-- Player Colors (Name Plate Backgrounds) -->
			<div class="input-row">
				<label>P1 Color:</label>
				<select id="p1ColorSelect" class="select-field">
					<option value="#1e40af">Blue</option>
					<option value="#dc2626">Red</option>
					<option value="#16a34a">Green</option>
					<option value="#ea580c">Orange</option>
					<option value="#9333ea">Purple</option>
					<option value="#0891b2">Cyan</option>
				</select>
				<label style="margin-left: 15px;">P2 Color:</label>
				<select id="p2ColorSelect" class="select-field">
					<option value="#dc2626">Red</option>
					<option value="#1e40af">Blue</option>
					<option value="#16a34a">Green</option>
					<option value="#ea580c">Orange</option>
					<option value="#9333ea">Purple</option>
					<option value="#0891b2">Cyan</option>
				</select>
				<button class="btn hover" id="swapColorsBtn" style="margin-left: 10px;">Swap</button>
			</div>

			<!-- Reset Match -->
			<div class="input-row">
				<button class="btn hover redBtn" id="resetBtn" style="width: 100%;">Reset Match</button>
			</div>
		</section>

		<!-- =================================================================== -->
		<!-- SECTION: Logo Management -->
		<!-- =================================================================== -->
		<section class="section-card" id="logoManagement">
			<div class="section-card__title">
				<span class="section-title-text">Sponsor Logos</span>
			</div>

			<!-- Left Logo (L0) -->
			<div class="input-row">
				<label>Left Logo:</label>
				<span class="hover photoUploadBtn" id="l0UploadBtn">
					<input type="file" id="FileUploadL0" accept="image/png, image/jpeg, image/svg+xml" />
					<div style="position:relative; display:inline-block;">
						<img id="l0Img" src="" style="height:30px; max-width:70px; display:none;">
						<span id="l0Delete" class="photo-delete-btn" style="display:none;">&times;</span>
					</div>
					<span id="l0Text">Upload</span>
				</span>
			</div>

			<!-- Right Logo (L4) -->
			<div class="input-row">
				<label>Right Logo:</label>
				<span class="hover photoUploadBtn" id="l4UploadBtn">
					<input type="file" id="FileUploadL4" accept="image/png, image/jpeg, image/svg+xml" />
					<div style="position:relative; display:inline-block;">
						<img id="l4Img" src="" style="height:30px; max-width:70px; display:none;">
						<span id="l4Delete" class="photo-delete-btn" style="display:none;">&times;</span>
					</div>
					<span id="l4Text">Upload</span>
				</span>
			</div>
		</section>

		<!-- =================================================================== -->
		<!-- SECTION: External Data Sources (Scoreholio Bridge) -->
		<!-- =================================================================== -->
		<section class="section-card" id="externalDataSources">
			<div class="section-card__title">
				<span class="section-title-text">External Data Sources</span>
			</div>

			<!-- Scoreholio Bridge -->
			<div class="input-row">
				<label>Scoreholio Court URL:</label>
				<input type="text" id="scoreholioUrl" class="input-field" placeholder="https://scoreholio.com/court/...">
			</div>

			<div class="input-row">
				<button class="btn hover greenBtn" id="scoreholioConnectBtn" style="width: 48%;">Connect</button>
				<button class="btn hover redBtn" id="scoreholioDisconnectBtn" style="width: 48%; margin-left: 4%;" disabled>Disconnect</button>
			</div>

			<!-- Status Display -->
			<div class="input-row" style="margin-top: 10px;">
				<div id="scoreholioStatus" style="padding: 8px; background: var(--bg-secondary); border-radius: 4px; font-size: 12px;">
					<strong>Status:</strong> <span id="scoreholioStatusText">Not connected</span>
				</div>
			</div>

			<!-- Polling Frequency -->
			<div class="input-row" style="margin-top: 10px;">
				<label>Poll Frequency (sec):</label>
				<input type="number" id="scoreholioPollingFreq" class="input-field" value="5" min="1" max="60" style="width: 80px;">
			</div>
		</section>

		<!-- =================================================================== -->
		<!-- MODULE DOCKS: Sport-specific UI injected here -->
		<!-- =================================================================== -->

		<!-- Billiards Module Dock -->
		<div id="billiardsDock" class="module-dock noShow">
			<!-- Billiards-specific controls will be injected here -->
		</div>

		<!-- Darts Module Dock -->
		<div id="dartsDock" class="module-dock noShow">
			<!-- Darts-specific controls will be injected here -->
		</div>

	</div>

	<!-- =================================================================== -->
	<!-- Settings Sidebar Modal -->
	<!-- =================================================================== -->
	<div id="settingsModal" class="modal noShow">
		<div class="modal-content">
			<div class="modal-header">
				<h2>Settings</h2>
				<button class="modal-close-btn" id="closeSettingsBtn">&times;</button>
			</div>
			<div class="modal-body">

				<!-- Global Settings -->
				<h3>Global Settings</h3>
				<div class="input-row">
					<label>
						<input type="checkbox" id="showOverlayChk" checked>
						Show Scoreboard Overlay
					</label>
				</div>
n				<!-- NEW: Overlay Theme Selector -->
				<div class="input-row">
					<label for="overlaySkinSelect">Overlay Theme:</label>
					<select id="overlaySkinSelect" class="select-field">
						<option value="default">Default Steelblue</option>
						<option value="pro-sleek">Pro Sleek</option>
					</select>
				</div>

				<hr style="border: 1px solid var(--border-color); margin: 15px 0;">

				<!-- Module Toggles -->
				<h3>Game Modules</h3>
				<div class="input-row">
					<label>
						<input type="checkbox" id="enableBilliardsChk" checked>
						Enable Billiards Module (Ball Tracker)
					</label>
				</div>
				<div class="input-row">
					<label>
						<input type="checkbox" id="enableDartsChk">
						Enable Darts Module (Coming Soon)
					</label>
				</div>

				<hr style="border: 1px solid var(--border-color); margin: 15px 0;">

				<!-- Premium Modules -->
				<h3>Premium Modules</h3>
				<div class="input-row">
					<label>
						<input type="checkbox" id="enableAdvertisingChk">
						Enable Advertising Module
					</label>
				</div>
		<div class="input-row">
				<label>
					<input type="checkbox" id="enableShotClockChk">
					Enable Shot Clock Module (Universal Timer)
				</label>
			</div>

			</div>
		</div>
	</div>

	<!-- Load the Master Controller -->
	<script type="module" src="./MasterController.js"></script>

	<script>
		// Display version number
		document.getElementById('verNum').textContent = versionNum;
	</script>

</body>
</html>
